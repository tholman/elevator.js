/*!
 * Elevator.js
 *
 * MIT licensed
 * Copyright (C) 2015 Tim Holman, http://tholman.com
 */
var Elevator=function(n){"use strict"
function e(n,e,t,o){return(n/=o/2)<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)}function t(n,e){for(var t in e){void 0===n[t]&&"function"!=typeof t&&(n[t]=e[t])}return n}function o(n){for(var e=0;n;)e+=n.offsetTop||0,n=n.offsetParent
return C&&(e-=C),e}function l(n){E||(E=n)
var t=n-E,o=e(t,T,k-T,w),i=window
A!==document.body&&(i=A),i.scrollTo(0,o),t<w?v=requestAnimationFrame(l):a()}function i(){return window.requestAnimationFrame&&window.Audio&&window.addEventListener}function u(){E=null,T=null,g=!1}function r(){y&&(k=o(y))}function a(){u(),m&&(m.pause(),m.currentTime=0),f&&f.play(),p&&p()}function d(){g&&(cancelAnimationFrame(v),u(),m&&(m.pause(),m.currentTime=0),r(),window.scrollTo(0,k))}function c(n){n.addEventListener?n.addEventListener("click",h.elevate,!1):n.attachEvent("onclick",function(){r(),document.documentElement.scrollTop=k,document.body.scrollTop=k,window.scroll(0,k)})}var s,m,f,p,A=null,v=null,w=null,b=!1,E=null,T=null,k=0,y=null,C=null,g=!1,h=this
this.elevate=function(){g||(g=!0,T=document.documentElement.scrollTop||A.scrollTop,r(),b||(w=1.5*Math.abs(k-T)),requestAnimationFrame(l),m&&m.play(),s&&s())},function(n){n=t(n,{scrollElement:document.body,duration:void 0,mainAudio:!1,endAudio:!1,preloadAudio:!0,loopAudio:!0,startCallback:null,endCallback:null}),A=n.scrollElement,n.element&&c(n.element),i()&&(n.duration&&(b=!0,w=n.duration),n.targetElement&&(y=n.targetElement),n.verticalPadding&&(C=n.verticalPadding),window.addEventListener("blur",d,!1),n.mainAudio&&(m=new Audio(n.mainAudio),m.setAttribute("preload",n.preloadAudio),m.setAttribute("loop",n.loopAudio)),n.endAudio&&(f=new Audio(n.endAudio),f.setAttribute("preload","true")),n.endCallback&&(p=n.endCallback),n.startCallback&&(s=n.startCallback))}(n)}
"undefined"!=typeof module&&module.exports&&(module.exports=Elevator)
